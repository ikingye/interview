<!doctype html><html lang=en dir=ltr><head><meta name=generator content="Hugo 0.140.1"><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="
  Mysql
  #


  Mysql 有哪些引擎，分别有什么特点？
  #



  Mysql 配置文件在哪里？
  #



  Mysql 索引是怎么实现的？
  #



  Mysql 事务是怎么实现的？
  #

begin 命令并不代表事务的开始，事务开始于 begin 命令之后的第一条语句执行的时候。
begin;
select * from xxx;
commit; -- 或者 rollback;


  Mysql 事务隔离级别有哪些？
  #


  
      
          隔离级别
          脏读
          不可重复读
          幻读
          锁
          备注
      
  
  
      
          读未提交（READ UNCOMMITTED）
          √
          √
          √
          不加锁
          
      
      
          读提交 （READ COMMITTED）
          ×
          √
          √
          
          Oracle 默认
      
      
          可重复读 （REPEATABLE READ）
          ×
          ×
          √
          
          Mysql 默认
      
      
          串行化 （SERIALIZABLE）
          ×
          ×
          ×
          共享锁
          相当于单线程
      
  


可重复读

事务开始时读到的已有数据是什么，在事务提交前的任意时刻，这些数据的值都是一样的。



设置隔离级别"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://kingye.me/interview/docs/backend/db/mysql/"><meta property="og:site_name" content="面试笔记"><meta property="og:title" content="Mysql"><meta property="og:description" content="Mysql # Mysql 有哪些引擎，分别有什么特点？ # Mysql 配置文件在哪里？ # Mysql 索引是怎么实现的？ # Mysql 事务是怎么实现的？ # begin 命令并不代表事务的开始，事务开始于 begin 命令之后的第一条语句执行的时候。
begin; select * from xxx; commit; -- 或者 rollback; Mysql 事务隔离级别有哪些？ # 隔离级别 脏读 不可重复读 幻读 锁 备注 读未提交（READ UNCOMMITTED） √ √ √ 不加锁 读提交 （READ COMMITTED） × √ √ Oracle 默认 可重复读 （REPEATABLE READ） × × √ Mysql 默认 串行化 （SERIALIZABLE） × × × 共享锁 相当于单线程 可重复读 事务开始时读到的已有数据是什么，在事务提交前的任意时刻，这些数据的值都是一样的。 设置隔离级别"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2021-06-28T15:25:32+08:00"><title>Mysql | 面试笔记</title>
<link rel=manifest href=/interview/manifest.json><link rel=icon href=/interview/favicon.png><link rel=canonical href=https://kingye.me/interview/docs/backend/db/mysql/><link rel=stylesheet href=/interview/book.min.a9fd347d07ee042ade7b8c22d2c14b72b69e154966252ab277e80a22c2a3be81.css integrity="sha256-qf00fQfuBCree4wi0sFLcraeFUlmJSqyd+gKIsKjvoE=" crossorigin=anonymous><script defer src=/interview/fuse.min.js></script><script defer src=/interview/en.search.min.917cca3b8a847c2112b919cd00ace05ac4c3397015e93b40d10c1b5389dae14b.js integrity="sha256-kXzKO4qEfCESuRnNAKzgWsTDOXAV6TtA0QwbU4na4Us=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/interview/><span>面试笔记</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul><li><a href=https://kingye.me target=_blank rel="noopener noreferrer">博客</a></li><li><a href=https://cdn.jsdelivr.net/gh/ikingye/imagehost/picgo/20200417021727.png target=_blank rel="noopener noreferrer">公众号</a></li><li><a href=https://github.com/ikingye target=_blank rel="noopener noreferrer">Github</a></li><li><a href=https://weibo.com/kingyip15215 target=_blank rel="noopener noreferrer">微博</a></li><li><a href=https://www.zhihu.com/people/wutongyip target=_blank rel="noopener noreferrer">知乎</a></li></ul><hr><ul><li><input type=checkbox id=section-dac10f36a18b2565b30b8a413c3cac77 class=toggle>
<label for=section-dac10f36a18b2565b30b8a413c3cac77 class="flex justify-between"><a href=/interview/docs/co/>1. 计算机组成原理</a></label><ul></ul></li><li><input type=checkbox id=section-fb17fa98eae091f7b482f2acb6708143 class=toggle>
<label for=section-fb17fa98eae091f7b482f2acb6708143 class="flex justify-between"><a href=/interview/docs/os/>2. 操作系统</a></label><ul><li><input type=checkbox id=section-15a77ede6695b349d6b35f1d7c2274ff class=toggle>
<label for=section-15a77ede6695b349d6b35f1d7c2274ff class="flex justify-between"><a href=/interview/docs/os/linux/>Linux</a></label></li></ul></li><li><input type=checkbox id=section-20a7ca78784beffdcceeb3f095091c0e class=toggle>
<label for=section-20a7ca78784beffdcceeb3f095091c0e class="flex justify-between"><a href=/interview/docs/network/>3. 网络</a></label><ul><li><a href=/interview/docs/network/http/>HTTP</a></li><li><a href=/interview/docs/network/tcp/>TCP/UDP/IP</a></li><li><a href=/interview/docs/network/send/>发包工具</a></li><li><a href=/interview/docs/network/capture/>抓包</a></li></ul></li><li><input type=checkbox id=section-72924d58dbacb8de81e2f82dd97a305d class=toggle>
<label for=section-72924d58dbacb8de81e2f82dd97a305d class="flex justify-between"><a href=/interview/docs/algs/>4. 数据结构与算法</a></label><ul><li><a href=/interview/docs/algs/tree/>二叉树</a></li><li><a href=/interview/docs/algs/dp/>动态规划</a></li><li><a href=/interview/docs/algs/sort/>排序算法</a></li><li><a href=/interview/docs/algs/search/>查询算法</a></li><li><a href=/interview/docs/algs/link/>链表</a></li></ul></li><li><input type=checkbox id=section-39d951d0ad0eced9b4aaf1b6cf4c4823 class=toggle>
<label for=section-39d951d0ad0eced9b4aaf1b6cf4c4823 class="flex justify-between"><a href=/interview/docs/pl/>5. 编程语言</a></label><ul><li><input type=checkbox id=section-f78ad56101563ceb112ca8ee058c057b class=toggle>
<label for=section-f78ad56101563ceb112ca8ee058c057b class="flex justify-between"><a href=/interview/docs/pl/c/>C</a></label></li><li><input type=checkbox id=section-319faf94d6dbbe1d0b5b5c5f3910b7b6 class=toggle>
<label for=section-319faf94d6dbbe1d0b5b5c5f3910b7b6 class="flex justify-between"><a href=/interview/docs/pl/cpp/>C++</a></label></li><li><input type=checkbox id=section-522f1afe051f53b681a9dc4732939836 class=toggle>
<label for=section-522f1afe051f53b681a9dc4732939836 class="flex justify-between"><a href=/interview/docs/pl/go/>Go</a></label></li><li><input type=checkbox id=section-bf4547a2ee3a6320c7f0993dbea87e98 class=toggle>
<label for=section-bf4547a2ee3a6320c7f0993dbea87e98 class="flex justify-between"><a href=/interview/docs/pl/java/>Java</a></label></li><li><input type=checkbox id=section-44cf7e03ff34a0f1993f67470f8c2eae class=toggle>
<label for=section-44cf7e03ff34a0f1993f67470f8c2eae class="flex justify-between"><a href=/interview/docs/pl/javascript/>JavaScript</a></label></li><li><input type=checkbox id=section-d5f9f62a3afa6eb21e96fb4c63e424f5 class=toggle>
<label for=section-d5f9f62a3afa6eb21e96fb4c63e424f5 class="flex justify-between"><a href=/interview/docs/pl/kotlin/>Kotlin</a></label></li><li><input type=checkbox id=section-f2328c75ed3f1e79eb3721148691db56 class=toggle>
<label for=section-f2328c75ed3f1e79eb3721148691db56 class="flex justify-between"><a href=/interview/docs/pl/php/>PHP</a></label></li><li><input type=checkbox id=section-33d3b9e688a788c670c7868ac2e5a351 class=toggle>
<label for=section-33d3b9e688a788c670c7868ac2e5a351 class="flex justify-between"><a href=/interview/docs/pl/python/>Python</a></label></li><li><input type=checkbox id=section-2c49e304fc6a00749ef946ba6fe9cb2b class=toggle>
<label for=section-2c49e304fc6a00749ef946ba6fe9cb2b class="flex justify-between"><a href=/interview/docs/pl/rust/>Rust</a></label></li></ul></li><li><input type=checkbox id=section-d06016cb25b23286638ddf3350722e26 class=toggle>
<label for=section-d06016cb25b23286638ddf3350722e26 class="flex justify-between"><a href=/interview/docs/se/>6. 软件工程</a></label><ul><li><input type=checkbox id=section-9331ff558d061ec5ecc0fd75ed023b3d class=toggle>
<label for=section-9331ff558d061ec5ecc0fd75ed023b3d class="flex justify-between"><a href=/interview/docs/se/dp/>设计模式</a></label></li><li><input type=checkbox id=section-34c527725bfc137cabd0b156bc2470db class=toggle>
<label for=section-34c527725bfc137cabd0b156bc2470db class="flex justify-between"><a href=/interview/docs/se/architecture/>架构设计</a></label></li><li><input type=checkbox id=section-89a69356aba8ed5632f09cf610d14d83 class=toggle>
<label for=section-89a69356aba8ed5632f09cf610d14d83 class="flex justify-between"><a href=/interview/docs/se/pm/>项目管理</a></label><ul></ul></li></ul></li><li><input type=checkbox id=section-1f7a0891fb78ba44611d7aaf1febf529 class=toggle>
<label for=section-1f7a0891fb78ba44611d7aaf1febf529 class="flex justify-between"><a href=/interview/docs/cloud/>7. 云计算</a></label><ul><li><input type=checkbox id=section-ba9e9c3a7a403bd2c66dad9393b90a1d class=toggle>
<label for=section-ba9e9c3a7a403bd2c66dad9393b90a1d class="flex justify-between"><a href=/interview/docs/cloud/docker/>Docker</a></label></li><li><input type=checkbox id=section-2d019f6b9260269d72858ce6a06737c7 class=toggle>
<label for=section-2d019f6b9260269d72858ce6a06737c7 class="flex justify-between"><a href=/interview/docs/cloud/kubernetes/>Kubernetes</a></label></li><li><input type=checkbox id=section-cdee8e227c830bdacf353288dcfa8713 class=toggle>
<label for=section-cdee8e227c830bdacf353288dcfa8713 class="flex justify-between"><a href=/interview/docs/cloud/native/>Cloud Native</a></label></li></ul></li><li><input type=checkbox id=section-b0dc122b75a8ee190a04c74ddd03587d class=toggle>
<label for=section-b0dc122b75a8ee190a04c74ddd03587d class="flex justify-between"><a href=/interview/docs/bigdata/>8. 大数据</a></label><ul></ul></li><li><input type=checkbox id=section-90533c7a2355e16214e260ea8d55c63e class=toggle>
<label for=section-90533c7a2355e16214e260ea8d55c63e class="flex justify-between"><a href=/interview/docs/ai/>9. 人工智能</a></label><ul><li><input type=checkbox id=section-31da2fa2ee2a41438432ac1eba96b3fc class=toggle>
<label for=section-31da2fa2ee2a41438432ac1eba96b3fc class="flex justify-between"><a href=/interview/docs/ai/ml/>机器学习</a></label><ul></ul></li></ul></li><li><input type=checkbox id=section-cc006a1bb48228b384505e11bb3129e7 class=toggle checked>
<label for=section-cc006a1bb48228b384505e11bb3129e7 class="flex justify-between"><a role=button>10. 后台</a></label><ul><li><input type=checkbox id=section-ccd5ac4584b3fa2ea23f7d1dc555a0d5 class=toggle>
<label for=section-ccd5ac4584b3fa2ea23f7d1dc555a0d5 class="flex justify-between"><a href=/interview/docs/backend/web/>Web 后端</a></label><ul><li><input type=checkbox id=section-6211b0c9d7bd9ad7800b0d9b5979d20d class=toggle>
<label for=section-6211b0c9d7bd9ad7800b0d9b5979d20d class="flex justify-between"><a href=/interview/docs/backend/web/go/>Go Web 后端</a></label></li><li><input type=checkbox id=section-255465e6e90cf5ae6f3324c7269de337 class=toggle>
<label for=section-255465e6e90cf5ae6f3324c7269de337 class="flex justify-between"><a href=/interview/docs/backend/web/java/>Java Web 后端</a></label></li><li><input type=checkbox id=section-47fc294bf9f2b0bce5a420f179960dcc class=toggle>
<label for=section-47fc294bf9f2b0bce5a420f179960dcc class="flex justify-between"><a href=/interview/docs/backend/web/php/>PHP 后端</a></label></li><li><input type=checkbox id=section-3f6666df817e5c119875d8253ceeb2ee class=toggle>
<label for=section-3f6666df817e5c119875d8253ceeb2ee class="flex justify-between"><a href=/interview/docs/backend/web/python/>Python 后端</a></label></li></ul></li><li><a href=/interview/docs/backend/db/>数据库</a><ul><li><input type=checkbox id=section-8fa84f1849dedcae8e410c308b4bc8be class=toggle checked>
<label for=section-8fa84f1849dedcae8e410c308b4bc8be class="flex justify-between"><a href=/interview/docs/backend/db/mysql/ class=active>Mysql</a></label></li><li><input type=checkbox id=section-dbaa6f72dbf11be2ea3dce98a8468d7c class=toggle>
<label for=section-dbaa6f72dbf11be2ea3dce98a8468d7c class="flex justify-between"><a href=/interview/docs/backend/db/redis/>Redis</a></label></li></ul></li><li><a href=/interview/docs/backend/mq/>消息队列</a><ul><li><input type=checkbox id=section-b934a848742f6080c0c26d23369dfb2c class=toggle>
<label for=section-b934a848742f6080c0c26d23369dfb2c class="flex justify-between"><a href=/interview/docs/backend/mq/kafka/>Kafka</a></label></li><li><input type=checkbox id=section-247d070e4577eff571ff178160af1d88 class=toggle>
<label for=section-247d070e4577eff571ff178160af1d88 class="flex justify-between"><a href=/interview/docs/backend/mq/rocketmq/>RocketMQ</a></label></li><li><input type=checkbox id=section-be6848561574827c9620cc15b62c886e class=toggle>
<label for=section-be6848561574827c9620cc15b62c886e class="flex justify-between"><a href=/interview/docs/backend/mq/rabbitmq/>RabbitMQ</a></label></li></ul></li><li><input type=checkbox id=section-b158b58682199110a5ab11ea24f35889 class=toggle>
<label for=section-b158b58682199110a5ab11ea24f35889 class="flex justify-between"><a href=/interview/docs/backend/others/>其他</a></label><ul><li><input type=checkbox id=section-bd1315ed0de1fc517edc2ae50972c39b class=toggle>
<label for=section-bd1315ed0de1fc517edc2ae50972c39b class="flex justify-between"><a href=/interview/docs/backend/others/hot-load/>配置热加载</a></label></li><li><input type=checkbox id=section-e9c9beb1bd09bb9491ceabda054cf53c class=toggle>
<label for=section-e9c9beb1bd09bb9491ceabda054cf53c class="flex justify-between"><a href=/interview/docs/backend/others/hot-restart/>程序热重启</a></label></li></ul></li></ul></li><li><input type=checkbox id=section-e43a83c4a95aebbedfe453d8ff1c4c3f class=toggle>
<label for=section-e43a83c4a95aebbedfe453d8ff1c4c3f class="flex justify-between"><a href=/interview/docs/frontend/>11. 前端与客户端</a></label><ul><li><input type=checkbox id=section-5e63069f6bea9364caf6d277a66db738 class=toggle>
<label for=section-5e63069f6bea9364caf6d277a66db738 class="flex justify-between"><a href=/interview/docs/frontend/web/>Web 前端</a></label><ul></ul></li></ul></li><li><input type=checkbox id=section-36172daab105faacbfda8fdec8025d30 class=toggle>
<label for=section-36172daab105faacbfda8fdec8025d30 class="flex justify-between"><a href=/interview/docs/op/>13. 运维</a></label><ul></ul></li><li><input type=checkbox id=section-6b8fc8dbaf7a7e7c4b743b3e0a0229ee class=toggle>
<label for=section-6b8fc8dbaf7a7e7c4b743b3e0a0229ee class="flex justify-between"><a href=/interview/docs/test/>14. 测试</a></label><ul></ul></li><li><input type=checkbox id=section-711078fd7861837cd24ff01085202907 class=toggle>
<label for=section-711078fd7861837cd24ff01085202907 class="flex justify-between"><a href=/interview/docs/security/>13. 安全</a></label><ul><li><input type=checkbox id=section-b26706241ad173d7b10417a0b820c98d class=toggle>
<label for=section-b26706241ad173d7b10417a0b820c98d class="flex justify-between"><a href=/interview/docs/security/web/>Web 安全</a></label><ul><li><a href=/interview/docs/security/web/xss/>XSS</a></li><li><a href=/interview/docs/security/web/csrf/>CSRF</a></li></ul></li></ul></li><li><input type=checkbox id=section-f0c6f0ad0f1efaf06edd2bc2c4729452 class=toggle>
<label for=section-f0c6f0ad0f1efaf06edd2bc2c4729452 class="flex justify-between"><a href=/interview/docs/others/>15. 其他</a></label><ul><li><a href=/interview/docs/others/encode/>字符编码</a></li><li><a href=/interview/docs/others/encryption/>加密</a></li><li><a href=/interview/docs/others/compile/>编译</a></li></ul></li></ul><hr><ul><li><a href=https://cdn.jsdelivr.net/gh/ikingye/imagehost/picgo/20200417022040.png target=_blank rel="noopener noreferrer">微信</a></li><li><a href="https://qm.qq.com/cgi-bin/qm/qr?k=EUhzg0UwUksxpQnwEmPngRLezlC6qrnn&jump_from=webapi" target=_blank rel="noopener noreferrer"><img src=//pub.idqqimg.com/wpa/images/group.png></a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/interview/svg/menu.svg class=book-icon alt=Menu>
</label><strong>Mysql</strong>
<label for=toc-control><img src=/interview/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#mysql-有哪些引擎分别有什么特点>Mysql 有哪些引擎，分别有什么特点？</a></li><li><a href=#mysql-配置文件在哪里>Mysql 配置文件在哪里？</a></li><li><a href=#mysql-索引是怎么实现的>Mysql 索引是怎么实现的？</a></li><li><a href=#mysql-事务是怎么实现的>Mysql 事务是怎么实现的？</a></li><li><a href=#mysql-事务隔离级别有哪些>Mysql 事务隔离级别有哪些？</a><ul><li><a href=#可重复读>可重复读</a></li></ul></li><li><a href=#为什么-oracle-等默认隔离级别是-read-committed-而-mysql-默认隔离级别是-repeatable-read>为什么 Oracle 等默认隔离级别是 <code>READ COMMITTED</code> ，而 Mysql 默认隔离级别是 <code>REPEATABLE READ</code>？</a></li><li><a href=#mysql-有哪些锁各自的使用场景是什么>Mysql 有哪些锁，各自的使用场景是什么？</a></li><li><a href=#mysql-什么情况下会出现死锁>Mysql 什么情况下会出现死锁？</a></li><li><a href=#mysql-如何保证数据一致性>Mysql 如何保证数据一致性？</a></li><li><a href=#mysql-主从如何同步>Mysql 主从如何同步？</a></li></ul></nav><hr><ul><li><a href=https://cdn.jsdelivr.net/gh/ikingye/imagehost/picgo/20200417022040.png target=_blank rel="noopener noreferrer">微信</a></li><li><a href="https://qm.qq.com/cgi-bin/qm/qr?k=EUhzg0UwUksxpQnwEmPngRLezlC6qrnn&jump_from=webapi" target=_blank rel="noopener noreferrer"><img src=//pub.idqqimg.com/wpa/images/group.png></a></li></ul></aside></header><article id=article class=markdown><h1 id=mysql>Mysql
<a class=anchor href=#mysql>#</a></h1><h2 id=mysql-有哪些引擎分别有什么特点>Mysql 有哪些引擎，分别有什么特点？
<a class=anchor href=#mysql-%e6%9c%89%e5%93%aa%e4%ba%9b%e5%bc%95%e6%93%8e%e5%88%86%e5%88%ab%e6%9c%89%e4%bb%80%e4%b9%88%e7%89%b9%e7%82%b9>#</a></h2><hr><h2 id=mysql-配置文件在哪里>Mysql 配置文件在哪里？
<a class=anchor href=#mysql-%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e5%9c%a8%e5%93%aa%e9%87%8c>#</a></h2><hr><h2 id=mysql-索引是怎么实现的>Mysql 索引是怎么实现的？
<a class=anchor href=#mysql-%e7%b4%a2%e5%bc%95%e6%98%af%e6%80%8e%e4%b9%88%e5%ae%9e%e7%8e%b0%e7%9a%84>#</a></h2><hr><h2 id=mysql-事务是怎么实现的>Mysql 事务是怎么实现的？
<a class=anchor href=#mysql-%e4%ba%8b%e5%8a%a1%e6%98%af%e6%80%8e%e4%b9%88%e5%ae%9e%e7%8e%b0%e7%9a%84>#</a></h2><p>begin 命令并不代表事务的开始，事务开始于 begin 命令之后的第一条语句执行的时候。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>begin</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>select</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>from</span> xxx;
</span></span><span style=display:flex><span><span style=color:#66d9ef>commit</span>; <span style=color:#75715e>-- 或者 rollback;
</span></span></span></code></pre></div><hr><h2 id=mysql-事务隔离级别有哪些>Mysql 事务隔离级别有哪些？
<a class=anchor href=#mysql-%e4%ba%8b%e5%8a%a1%e9%9a%94%e7%a6%bb%e7%ba%a7%e5%88%ab%e6%9c%89%e5%93%aa%e4%ba%9b>#</a></h2><table><thead><tr><th>隔离级别</th><th>脏读</th><th>不可重复读</th><th>幻读</th><th>锁</th><th>备注</th></tr></thead><tbody><tr><td>读未提交（<code>READ UNCOMMITTED</code>）</td><td>√</td><td>√</td><td>√</td><td>不加锁</td><td></td></tr><tr><td>读提交 （<code>READ COMMITTED</code>）</td><td>×</td><td>√</td><td>√</td><td></td><td>Oracle 默认</td></tr><tr><td>可重复读 （<code>REPEATABLE READ</code>）</td><td>×</td><td>×</td><td>√</td><td></td><td>Mysql 默认</td></tr><tr><td>串行化 （<code>SERIALIZABLE</code>）</td><td>×</td><td>×</td><td>×</td><td>共享锁</td><td>相当于单线程</td></tr></tbody></table><ul><li>可重复读<ul><li>事务开始时读到的已有数据是什么，在事务提交前的任意时刻，这些数据的值都是一样的。</li></ul></li></ul><p>设置隔离级别</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#75715e>-- SET [SESSION | GLOBAL] TRANSACTION ISOLATION LEVEL {READ UNCOMMITTED | READ COMMITTED | REPEATABLE READ | SERIALIZABLE}
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>set</span> <span style=color:#66d9ef>global</span> <span style=color:#66d9ef>transaction</span> <span style=color:#66d9ef>isolation</span> <span style=color:#66d9ef>level</span> <span style=color:#66d9ef>read</span> <span style=color:#66d9ef>committed</span>;
</span></span></code></pre></div><p>查询当前有多少事务正在运行</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>select</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>from</span> information_schema.innodb_trx;
</span></span></code></pre></div><hr><h3 id=可重复读>可重复读
<a class=anchor href=#%e5%8f%af%e9%87%8d%e5%a4%8d%e8%af%bb>#</a></h3><p>为了实现可重复读，MySQL 采用了 <code>MVVC</code> (多版本并发控制) 的方式</p><p><img src=https://cdn.jsdelivr.net/gh/ikingye/imagehost/picgo/20200710153758.png alt></p><p>我们在数据库表中看到的一行记录可能实际上有多个版本，每个版本的记录除了有数据本身外，还要有一个表示版本的字段，记为 row trx_id，而这个字段就是使其产生的事务的 id，事务 ID 记为 transaction id，它在事务开始的时候向事务系统申请，按时间先后顺序递增。</p><p>快照，学名叫做<strong>一致性视图</strong>，这也是可重复读和不可重复读的关键，</p><ul><li><strong>读提交</strong>是每次执行语句的时候都重新生成一次快照</li><li><strong>可重复读</strong>是在事务开始的时候生成一个当前<strong>事务全局性</strong>的快照</li></ul><hr><p><strong>MySQL 的可重复读隔离级别其实解决了幻读问题</strong></p><p>读提交解决了脏读问题，行锁解决了并发更新的问题。
并发写问题的解决方式就是<strong>行锁</strong>，而解决幻读用的是<strong>间隙锁</strong>，
MySQL 把行锁和间隙锁合并在一起，解决了并发写和幻读的问题，这个锁叫做 <code>Next-Key 锁</code>。</p><p>参考：</p><ul><li><a href=https://zhuanlan.zhihu.com/p/117476959>MySQL 事务隔离级别和实现原理</a></li></ul><p>&ndash;</p><h2 id=为什么-oracle-等默认隔离级别是-read-committed-而-mysql-默认隔离级别是-repeatable-read>为什么 Oracle 等默认隔离级别是 <code>READ COMMITTED</code> ，而 Mysql 默认隔离级别是 <code>REPEATABLE READ</code>？
<a class=anchor href=#%e4%b8%ba%e4%bb%80%e4%b9%88-oracle-%e7%ad%89%e9%bb%98%e8%ae%a4%e9%9a%94%e7%a6%bb%e7%ba%a7%e5%88%ab%e6%98%af-read-committed-%e8%80%8c-mysql-%e9%bb%98%e8%ae%a4%e9%9a%94%e7%a6%bb%e7%ba%a7%e5%88%ab%e6%98%af-repeatable-read>#</a></h2><hr><h2 id=mysql-有哪些锁各自的使用场景是什么>Mysql 有哪些锁，各自的使用场景是什么？
<a class=anchor href=#mysql-%e6%9c%89%e5%93%aa%e4%ba%9b%e9%94%81%e5%90%84%e8%87%aa%e7%9a%84%e4%bd%bf%e7%94%a8%e5%9c%ba%e6%99%af%e6%98%af%e4%bb%80%e4%b9%88>#</a></h2><table><thead><tr><th></th><th>行锁</th><th>表锁</th><th>页锁</th></tr></thead><tbody><tr><td>MyISAM</td><td></td><td>√</td><td></td></tr><tr><td>BDB</td><td></td><td>√</td><td>√</td></tr><tr><td>InnoDB</td><td>√</td><td>√</td><td></td></tr></tbody></table><p>BDB 已经被 InnoDB 所取代</p><hr><ul><li>表锁<ul><li>开销小，加锁快；不会出现死锁；锁定力度大，发生锁冲突概率高，并发度最低</li></ul></li><li>行锁<ul><li>开销大，加锁慢；会出现死锁；锁定粒度小，发生锁冲突的概率低，并发度高</li></ul></li><li>页锁<ul><li>开销和加锁速度介于表锁和行锁之间；会出现死锁；锁定粒度介于表锁和行锁之间，并发度一般</li></ul></li></ul><hr><ul><li>共享锁（S）</li><li>排他锁（X)</li><li>意向共享锁（IS）</li><li>意向排他锁（IX）</li></ul><hr><ul><li>行锁（<code>Record Locks</code>）<ul><li>行锁一定是作用在<strong>索引</strong>上的</li></ul></li><li>间隙锁（<code>Gap Locks</code>）<ul><li>间隙锁一定是<strong>开区间</strong></li><li>间隙锁的应用场景包括并发读取、并发更新、并发删除和并发插入</li><li><code>可重复读</code>与<code>串行化</code>才有<code>间隙锁</code>，<code>读未提交</code>与<code>读提交</code>没有<code>间隙锁</code></li></ul></li><li>临键锁（<code>Next-key Locks</code>）<ul><li>临键锁是行锁 + 间隙锁，即临键锁是是一个<strong>左开右闭</strong>的区间</li><li>RR 级别下使用 <code>select ... in share mode</code> 或者 <code>select ... for update 语句</code>，那么 InnoDB 会使用<strong>临键锁</strong>，因而可以防止<strong>幻读</strong>（<code>读后写</code>的场景）<ul><li>RR 级别下使用普通的 select 语句，InnoDB 将是<strong>快照读</strong>，不会使用任何锁，因而还是无法防止幻读。</li></ul></li></ul></li><li>共享锁 / 排他锁（<code>Shared and Exclusive Locks</code>）<ul><li>共享锁 / 排他锁都只是行锁，与间隙锁无关</li><li>共享锁：<code>select ... in share mode</code></li><li>排他锁：<code>select ... for update</code></li><li>尽管共享锁 / 排他锁是行锁，与间隙锁无关，但一个事务在请求共享锁 / 排他锁时，获取到的结果却可能是行锁，也可能是间隙锁，也可能是临键锁，这取决于数据库的<strong>隔离级别</strong>以及<strong>查询的数据是否存在</strong>。</li></ul></li><li>意向共享锁 / 意向排他锁（<code>Intention Shared and Exclusive Locks</code>）<ul><li>意向共享锁 / 意向排他锁属于<strong>表锁</strong></li><li>取得意向共享锁 / 意向排他锁是取得共享锁 / 排他锁的<strong>前置条件</strong></li></ul></li><li>插入意向锁（<code>Insert Intention Locks</code>）<ul><li>插入意向锁是一种特殊的<strong>间隙锁</strong>，该锁只用于<strong>并发插入</strong>操作</li><li>如果说间隙锁锁住的是一个区间，那么插入意向锁锁住的就是一个点</li></ul></li><li>自增锁（<code>Auto-inc Locks</code>）</li></ul><hr><ul><li>增：插入意向锁</li><li>删改：排他锁</li><li>查：共享锁</li></ul><p>参考：</p><ul><li><a href=https://blog.csdn.net/Saintyyu/article/details/91269087>MySQL 常见的七种锁详细介绍</a></li></ul><hr><h2 id=mysql-什么情况下会出现死锁>Mysql 什么情况下会出现死锁？
<a class=anchor href=#mysql-%e4%bb%80%e4%b9%88%e6%83%85%e5%86%b5%e4%b8%8b%e4%bc%9a%e5%87%ba%e7%8e%b0%e6%ad%bb%e9%94%81>#</a></h2><ul><li>在 InnoDB 引擎下，RR (<code>REPEATABLE-READ</code>) 级别，如果多个事务争抢同一个资源，会发生死锁。</li></ul><p><code>next-key lock</code></p><hr><h2 id=mysql-如何保证数据一致性>Mysql 如何保证数据一致性？
<a class=anchor href=#mysql-%e5%a6%82%e4%bd%95%e4%bf%9d%e8%af%81%e6%95%b0%e6%8d%ae%e4%b8%80%e8%87%b4%e6%80%a7>#</a></h2><hr><h2 id=mysql-主从如何同步>Mysql 主从如何同步？
<a class=anchor href=#mysql-%e4%b8%bb%e4%bb%8e%e5%a6%82%e4%bd%95%e5%90%8c%e6%ad%a5>#</a></h2></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/ikingye/interview/commit/0a984f242a5ed6dc727e299aa9c86fcd70aa69d2 title='Last modified by yewang | 2021-06-28' target=_blank rel=noopener><img src=/interview/svg/calendar.svg class=book-icon alt>
<span>2021-06-28</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script><div><br><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><link rel=stylesheet href=//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css><p><span id=busuanzi_container_page_pv>本文访问量 <span id=busuanzi_value_page_pv><i class="fa fa-spinner fa-spin"></i></span> 次</span></p><p><span id=busuanzi_container_site_pv>本站总访问量 <span id=busuanzi_value_site_pv><i class="fa fa-spinner fa-spin"></i></span> 次</span></p><p><span id=busuanzi_container_site_uv>本站总访客数 <span id=busuanzi_value_site_uv><i class="fa fa-spinner fa-spin"></i></span> 人</span></p></div></footer><div class=book-comments><script src=https://utteranc.es/client.js repo=ikingye/interview issue-term=pathname theme=github-light crossorigin=anonymous async></script><div id=footer><p><a href=https://kingye.me>叶王</a> &copy; 2013-2024
版权所有。如果本文档对你有所帮助，可以<a href=https://cdn.jsdelivr.net/gh/ikingye/imagehost/picgo/20200428110046.png target=_blank rel="noopener noreferrer">请作者喝饮料</a>。</p></div></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#mysql-有哪些引擎分别有什么特点>Mysql 有哪些引擎，分别有什么特点？</a></li><li><a href=#mysql-配置文件在哪里>Mysql 配置文件在哪里？</a></li><li><a href=#mysql-索引是怎么实现的>Mysql 索引是怎么实现的？</a></li><li><a href=#mysql-事务是怎么实现的>Mysql 事务是怎么实现的？</a></li><li><a href=#mysql-事务隔离级别有哪些>Mysql 事务隔离级别有哪些？</a><ul><li><a href=#可重复读>可重复读</a></li></ul></li><li><a href=#为什么-oracle-等默认隔离级别是-read-committed-而-mysql-默认隔离级别是-repeatable-read>为什么 Oracle 等默认隔离级别是 <code>READ COMMITTED</code> ，而 Mysql 默认隔离级别是 <code>REPEATABLE READ</code>？</a></li><li><a href=#mysql-有哪些锁各自的使用场景是什么>Mysql 有哪些锁，各自的使用场景是什么？</a></li><li><a href=#mysql-什么情况下会出现死锁>Mysql 什么情况下会出现死锁？</a></li><li><a href=#mysql-如何保证数据一致性>Mysql 如何保证数据一致性？</a></li><li><a href=#mysql-主从如何同步>Mysql 主从如何同步？</a></li></ul></nav><hr><ul><li><a href=https://cdn.jsdelivr.net/gh/ikingye/imagehost/picgo/20200417022040.png target=_blank rel="noopener noreferrer">微信</a></li><li><a href="https://qm.qq.com/cgi-bin/qm/qr?k=EUhzg0UwUksxpQnwEmPngRLezlC6qrnn&jump_from=webapi" target=_blank rel="noopener noreferrer"><img src=//pub.idqqimg.com/wpa/images/group.png></a></li></ul></div></aside></main></body></html>